# Docker 部署环境配置
# 复制此文件为 .env 并根据需要修改配置

# ===========================================
# 基础配置
# ===========================================
NODE_ENV=production
PORT=7392
LOG_LEVEL=info

# ===========================================
# 存储配置 - 选择一种存储类型
# ===========================================

# 选项 1: SQLite (默认，适合小规模使用)
PRIMARY_STORAGE_TYPE=sqlite
PRIMARY_STORAGE_URL=file:./data/webhook.db

# 选项 2: 远程 PostgreSQL
# PRIMARY_STORAGE_TYPE=postgresql
# PRIMARY_STORAGE_HOST=your-postgres-host.com
# PRIMARY_STORAGE_PORT=5432
# PRIMARY_STORAGE_DATABASE=webhook_db
# PRIMARY_STORAGE_USERNAME=webhook_user
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true

# 选项 3: 远程 MySQL
# PRIMARY_STORAGE_TYPE=mysql
# PRIMARY_STORAGE_HOST=your-mysql-host.com
# PRIMARY_STORAGE_PORT=3306
# PRIMARY_STORAGE_DATABASE=webhook_db
# PRIMARY_STORAGE_USERNAME=webhook_user
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true

# 选项 4: 远程 Elasticsearch
# PRIMARY_STORAGE_TYPE=elasticsearch
# PRIMARY_STORAGE_HOST=your-es-host.com
# PRIMARY_STORAGE_PORT=9200
# PRIMARY_STORAGE_USERNAME=elastic
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true
# PRIMARY_STORAGE_INDEX=webhook-messages

# ===========================================
# 备用存储配置（可选）
# ===========================================
ENABLE_FALLBACK_STORAGE=false

# 备用存储示例：当主存储是 ES 时，使用 PostgreSQL 作为备用
# FALLBACK_STORAGE_TYPE=postgresql
# FALLBACK_STORAGE_HOST=backup-postgres-host.com
# FALLBACK_STORAGE_PORT=5432
# FALLBACK_STORAGE_DATABASE=webhook_backup
# FALLBACK_STORAGE_USERNAME=backup_user
# FALLBACK_STORAGE_PASSWORD=backup-password

# ===========================================
# Redis 队列配置（可选）
# ===========================================
ENABLE_QUEUE=false

# 远程 Redis 配置
# REDIS_HOST=your-redis-host.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# 或者使用 Redis URL
# REDIS_URL=redis://username:password@your-redis-host.com:6379/0

# ===========================================
# Webhook 配置
# ===========================================
WEBHOOK_SECRET=your-webhook-secret-change-this
WEBHOOK_BATCH_SIZE=100
WEBHOOK_BATCH_TIMEOUT=5000

# ===========================================
# 常用远程数据库连接示例
# ===========================================

# AWS RDS PostgreSQL
# PRIMARY_STORAGE_TYPE=postgresql
# PRIMARY_STORAGE_HOST=your-db.region.rds.amazonaws.com
# PRIMARY_STORAGE_PORT=5432
# PRIMARY_STORAGE_DATABASE=webhook_db
# PRIMARY_STORAGE_USERNAME=webhook_user
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true

# Google Cloud SQL MySQL
# PRIMARY_STORAGE_TYPE=mysql
# PRIMARY_STORAGE_HOST=your-ip-address
# PRIMARY_STORAGE_PORT=3306
# PRIMARY_STORAGE_DATABASE=webhook_db
# PRIMARY_STORAGE_USERNAME=webhook_user
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true

# Elasticsearch Cloud
# PRIMARY_STORAGE_TYPE=elasticsearch
# PRIMARY_STORAGE_HOST=your-deployment.es.region.cloud.es.io
# PRIMARY_STORAGE_PORT=9243
# PRIMARY_STORAGE_USERNAME=elastic
# PRIMARY_STORAGE_PASSWORD=your-password
# PRIMARY_STORAGE_SSL=true
# PRIMARY_STORAGE_INDEX=webhook-messages

# Redis Cloud
# ENABLE_QUEUE=true
# REDIS_URL=redis://default:your-password@your-endpoint.cloud.redislabs.com:port
